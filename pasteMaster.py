# ttps://flask.palletsprojects.com/en/2.2.x/quickstart/#file-uploads
import json
from flask import Flask, render_template, send_file
app = Flask(__name__)

if __name__ == '__main__':
   app.run()

@app.route('/')
def homes():
   return render_template('index.html')

@app.route('/start', methods=['GET'])
def index():
   # file = open(r'./src/pythonScript/photo.py', 'r').read()
   # return render_template('start.html'), exec(file)
   return render_template('start.html')

@app.route('/pcb')
def get_image():
   filename = 'static/image/view.jpg'
   return send_file(filename, mimetype='image/jpg')

@app.route('/array')
def get_array():
   detections = [[[32, 12], [72, 11], [74, 66], [34, 68]], 
      [[124, 9], [164, 7], [166, 62], [126, 64]], 
      [[170, 307], [207, 307], [207, 355], [170, 355]], 
      [[255, 304], [292, 304], [292, 351], [255, 351]], 
      [[183, 193], [215, 192], [217, 243], [185, 244]], 
      [[242, 191], [274, 191], [274, 241], [242, 241]], 
      [[54, 129], [91, 129], [91, 167], [54, 167]], 
      [[115, 127], [152, 127], [152, 164], [115, 164]], 
      [[52, 79], [82, 79], [82, 115], [52, 115]], 
      [[192, 142], [218, 141], [220, 182], [193, 183]], 
      [[120, 76], [149, 76], [149, 112], [120, 112]], 
      [[235, 141], [261, 139], [263, 179], [237, 181]], 
      [[184, 256], [211, 256], [211, 295], [184, 295]], 
      [[60, 181], [92, 179], [94, 212], [62, 214]], 
      [[252, 253], [278, 253], [278, 291], [252, 291]], 
      [[116, 179], [147, 177], [149, 209], [118, 211]], 
      [[64, 226], [93, 226], [93, 255], [64, 255]], 
      [[122, 223], [151, 223], [151, 252], [122, 252]], 
      [[194, 100], [215, 100], [215, 128], [194, 128]], 
      [[240, 97], [261, 97], [261, 127], [240, 127]], 
      [[73, 270], [95, 270], [95, 292], [73, 292]], 
      [[125, 268], [146, 268], [146, 290], [125, 290]], 
      [[341, 62], [360, 62], [360, 87], [341, 87]], 
      [[324, 112], [345, 112], [345, 137], [324, 137]], 
      [[200, 71], [222, 71], [222, 90], [200, 90]], 
      [[231, 69], [253, 69], [253, 89], [231, 89]], 
      [[321, 181], [330, 162], [350, 172], [340, 191]], 
      [[347, 215], [360, 215], [360, 235], [347, 235]], 
      [[229, 45], [239, 45], [239, 57], [229, 57]], 
      [[210, 47], [221, 47], [221, 58], [210, 58]], 
      [[87, 306], [100, 306], [100, 314], [87, 314]], 
      [[122, 304], [134, 304], [134, 312], [122, 312]], 
      [[225, 23], [235, 23], [235, 30], [225, 30]], 
      [[96, 330], [104, 330], [104, 336], [96, 336]], 
      [[119, 329], [127, 329], [127, 335], [119, 335]], 
      [[214, 23], [220, 23], [220, 30], [214, 30]], 
      [[120, 350], [126, 350], [126, 355], [120, 355]], 
      [[99, 356],[99, 350],[104, 350],[104,356]]]

   dict = {
    "detections": detections
   }
   detections_json = json.dumps(detections)

   return (detections_json)
   # filename = 'static/text/test.txt'
   # return send_file(filename, mimetype='text/plain')

@app.errorhandler(404)
def page_not_found(error):
   return render_template('page_not_found.html'), 404

